<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="manifest.json">
    <title>Pressto - 눌러또</title>
    <!-- Google Fonts - Press Start 2P (Pixel Font) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="ui-overlay">
            <div id="score-display">0</div>
            <div id="token-display">0</div>
            <button id="pause-btn" class="game-btn hidden">⏸️</button>
            <div id="welcome-screen" class="screen">
                <h1>Pressto</h1>
                <p class="subtitle">눌러또</p>
                <div class="welcome-bird"></div>
                <button id="fullscreen-btn" class="fullscreen-btn">🎮 게임 시작</button>
                <p class="fullscreen-hint">터치하면 전체화면으로 전환됩니다</p>
            </div>
            <div id="start-screen" class="screen hidden">
                <div class="menu-header">
                    <h2 class="menu-title">Pressto</h2>
                    <div class="menu-header-right">
                        <div class="token-info">🪙 <span id="start-tokens">0</span></div>
                        <div id="login-area">
                            <button id="google-login-btn" class="google-login-btn">
                                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="G" width="18" height="18">
                                <span>로그인</span>
                            </button>
                        </div>
                        <div id="user-profile" class="user-profile hidden">
                            <img id="user-photo" class="user-photo" src="" alt="">
                            <button id="logout-btn" class="logout-btn">✕</button>
                        </div>
                    </div>
                </div>
                <div class="menu-content">
                    <button id="character-btn" class="character-select-btn">
                        <canvas id="character-preview" width="40" height="40"></canvas>
                        <span>캐릭터</span>
                    </button>
                    <div class="how-to-play-mini">
                        <span>누르면 ⬆️</span>
                        <span>떼면 ⬇️</span>
                    </div>
                </div>
                <button id="start-ranking-btn" class="start-ranking-btn">🏆 랭킹 보기</button>
                <p class="select-difficulty">난이도 선택</p>
                <div class="difficulty-buttons">
                    <button class="diff-btn easy" data-difficulty="easy">
                        <span class="diff-icon">🌱</span>
                        <span class="diff-name">Easy</span>
                    </button>
                    <button class="diff-btn middle" data-difficulty="middle">
                        <span class="diff-icon">⚡</span>
                        <span class="diff-name">Middle</span>
                    </button>
                    <button class="diff-btn hard" data-difficulty="hard">
                        <span class="diff-icon">🔥</span>
                        <span class="diff-name">Hard</span>
                    </button>
                </div>
            </div>
            <div id="character-screen" class="screen hidden">
                <h2>캐릭터 선택</h2>
                <div class="character-grid" id="character-grid">
                    <!-- 캐릭터들이 JS로 생성됨 -->
                </div>
                <button id="character-back-btn" class="pause-menu-btn">← 돌아가기</button>
            </div>
            <div id="pause-screen" class="screen hidden">
                <h2>일시정지</h2>
                <button id="resume-btn" class="pause-menu-btn">▶️ 계속하기</button>
                <button id="pause-home-btn" class="pause-menu-btn">🏠 처음으로</button>
            </div>
            <div id="gameover-screen" class="screen hidden">
                <h2>Game Over</h2>
                <div id="gameover-difficulty" class="gameover-difficulty">Easy</div>
                <div class="score-box">
                    <p>점수: <span id="final-score">0</span></p>
                    <p>최고: <span id="best-score">0</span></p>
                </div>
                <div class="revive-section">
                    <p class="token-count">🪙 <span id="gameover-tokens">0</span></p>
                    <button id="revive-btn" class="revive-btn">
                        🔄 되살리기 (1토큰)
                    </button>
                </div>
                <button id="ranking-btn" class="ranking-btn">🏆 랭킹</button>
                <button id="restart-btn">🔁 다시 하기</button>
                <button id="home-btn">🏠 처음으로</button>
            </div>
            <div id="ranking-screen" class="screen hidden">
                <div class="ranking-header">
                    <button id="ranking-back-btn" class="ranking-back-btn">←</button>
                    <h2>🏆 랭킹</h2>
                </div>
                <div class="ranking-difficulty-tabs">
                    <button class="rank-diff-tab active" data-diff="easy">🌱 Easy</button>
                    <button class="rank-diff-tab" data-diff="middle">⚡ Middle</button>
                    <button class="rank-diff-tab" data-diff="hard">🔥 Hard</button>
                </div>
                <div class="ranking-period-tabs">
                    <button class="rank-period-tab active" data-period="weekly">주간</button>
                    <button class="rank-period-tab" data-period="monthly">월간</button>
                    <button class="rank-period-tab" data-period="alltime">역대</button>
                </div>
                <div id="ranking-list" class="ranking-list">
                    <p class="ranking-loading">로딩 중...</p>
                </div>
            </div>
        </div>
    </div>
    <div id="rotate-message">
        <div class="rotate-content">
            <div class="rotate-icon">📱</div>
            <p>화면을 가로로 돌려주세요</p>
        </div>
    </div>
    <script src="firebase-config.js"></script>
    <script src="game.js"></script>
</body>
</html>
